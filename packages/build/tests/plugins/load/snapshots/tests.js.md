# Snapshot report for `packages/build/tests/plugins/load/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

<<<<<<< HEAD
## Early exit

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 2 steps. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌─────────────────────────────────────────────────────┐␊
    │ 2. Running build lifecycle from netlify-plugin-test │␊
    └─────────────────────────────────────────────────────┘␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    In "build" step from "netlify-plugin-test":␊
    Could not receive event from child process because it already exited␊
    `

## Local plugins

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Missing plugins

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error: 'does-not-exist' plugin not installed or found␊
    Cannot find module 'does-not-exist' from '/file/path'␊
    STACK TRACE␊
    `

## Node module plugins

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from netlify-plugin-test␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Override plugins

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from netlify-plugin-example␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    > OVERRIDE: "init" method in "netlify-plugin-example" has been overriden by "netlify-plugin-override"␊
    ┌────────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-override │␊
    └────────────────────────────────────────────────────────┘␊
    ␊
    Overridden init␊
    ␊
     √  netlify-plugin-override.init completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

=======
>>>>>>> Save cache after build
## Plugin.enabled

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
<<<<<<< HEAD
    ␊
    > Running Netlify Build Lifecycle␊
      Found 0 steps. Lets do this!␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Plugin.id is optional

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Process warnings

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    init␊
     ‼  warning (Warning)  test␊
    STACK TRACE␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Top function errors

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Error loading plugin:␊
    test␊
    STACK TRACE␊
    `

## Top-level errors

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Error importing plugin:␊
    test␊
    STACK TRACE␊
    `

## Unhandled promises

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
    { config: '/file/path' }␊
    ␊
    > Using config file: /file/path␊
    ␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    init␊
=======
      Loading plugin "@netlify/plugin-cache-core" from build core␊
<<<<<<< HEAD
<<<<<<< HEAD
>>>>>>> Save cache after build
=======
<<<<<<< HEAD
=======
      Loading plugin from netlify-plugin-example␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 2 steps. Lets do this!␊
    ␊
    > OVERRIDE: "init" method in "netlify-plugin-example" has been overriden by "netlify-plugin-override"␊
    ┌────────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-override │␊
    └────────────────────────────────────────────────────────┘␊
    ␊
    Overridden init␊
    ␊
     √  netlify-plugin-override.init completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 2. Running saveCache lifecycle from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
      Caching node_modules␊
    ␊
     √  @netlify/plugin-cache-core.saveCache completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Can use Node module plugins

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
      Loading plugin from netlify-plugin-test␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 2 steps. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 2. Running saveCache lifecycle from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
      Caching node_modules␊
    ␊
     √  @netlify/plugin-cache-core.saveCache completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Can use local plugins

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 2 steps. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 2. Running saveCache lifecycle from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.saveCache completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Plugin.id is optional

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin "@netlify/plugin-cache-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 2 steps. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 2. Running saveCache lifecycle from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.saveCache completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## Reports missing plugins

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
>>>>>>> Simplify caching
>>>>>>> Simplify caching
=======
>>>>>>> Fix test snapshots
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────────────────┐␊
    │ 1. Running saveCache lifecycle from @netlify/plugin-cache-core │␊
    └────────────────────────────────────────────────────────────────┘␊
    ␊
    > Caching artifacts␊
    ␊
     √  @netlify/plugin-cache-core.saveCache completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
    In "init" step from "netlify-plugin-test":␊
    UnhandledRejection: a promise was rejected but not handled: Error: test␊
    STACK TRACE␊
=======
    Error loading "@netlify/plugin-cache-core" plugin:␊
=======
    Error loading "@netlify/plugin-functions-core" plugin:␊
>>>>>>> Fix test snapshots
    TypeError [ERR_INVALID_ARG_TYPE]: The "path" argument must be of type string. Received type undefined␊
>>>>>>> Save cache after build
=======
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
>>>>>>> Fix tests
    `
