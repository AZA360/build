# Snapshot report for `packages/build/tests/plugins/config/tests.js`

The actual snapshot is saved in `tests.js.snap`.

Generated by [AVA](https://ava.li).

## plugin.config assign default values

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    test␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## plugin.config coerce types

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 1 step. Lets do this!␊
    ␊
    ┌────────────────────────────────────────────────────┐␊
    │ 1. Running init lifecycle from netlify-plugin-test │␊
    └────────────────────────────────────────────────────┘␊
    ␊
    ["test"]␊
    ␊
     √  netlify-plugin-test.init completed in 1ms␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## plugin.config is validated as a JSON schema 7

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Plugin 'config' must be a JSON schema v1.0.0 describing each configuration property.␊
    properties['test'].type should be equal to one of the allowed values␊
    ␊
      { "properties": { "test": { "type": "invalid"␊
          }␊
        }␊
      }␊
    ␊
    Example: { required: ["foo"], properties: { foo: { type: "string" }, bar: { type: "boolean" }␊
        }, additionalProperties: false␊
      }␊
    ␊
    Learn more about JSON schema at https://json-schema.org/understanding-json-schema/␊
    `

## plugin.config is validated as an object

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Plugin 'config' must be a JSON schema v1.0.0 describing each configuration property.␊
    It must be a plain object.␊
    ␊
      true␊
    ␊
    Example: { required: ["foo"], properties: { foo: { type: "string" }, bar: { type: "boolean" }␊
        }, additionalProperties: false␊
      }␊
    ␊
    Learn more about JSON schema at https://json-schema.org/understanding-json-schema/␊
    `

## plugin.config is validated as an object JSON schema

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Plugin 'config' must be a JSON schema v1.0.0 describing each configuration property.␊
    ␊
      { "test": {}␊
      }␊
    ␊
    Example: { required: ["foo"], properties: { foo: { type: "string" }, bar: { type: "boolean" }␊
        }, additionalProperties: false␊
      }␊
    ␊
    Learn more about JSON schema at https://json-schema.org/understanding-json-schema/␊
    `

## plugin.config validates properties

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Plugin configuration is invalid.␊
    test should be equal to one of the allowed values␊
    ␊
      { "test": false␊
      }␊
    ␊
    `

## plugin.config validates required properties

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Plugin configuration is invalid.␊
    should have required property '.test'␊
    ␊
      {}␊
    ␊
    `

## plugin.config validates unknown properties

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Plugin configuration is invalid.␊
    should NOT have additional properties␊
    ␊
      { "test": false␊
      }␊
    ␊
    `

## plugin.config works with undefined pluginConfig

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    > Running Netlify Build Lifecycle␊
      Found 0 steps. Lets do this!␊
    ␊
    ┌─────────────────────────────┐␊
    │   Netlify Build Complete    │␊
    └─────────────────────────────┘␊
    ␊
     √  Netlify Build completed in 1ms␊
    ␊
    Have a nice day!␊
    `

## pluginConfig must be an object

> Snapshot 1

    `> Starting Netlify Build v1.0.0␊
      https://github.com/netlify/build␊
    ␊
    Options␊
     { config: '/file/path' } ␊
    ␊
    > Using config file: /file/path␊
    ␊
    > Installing plugins dependencies␊
    ␊
    > Loading plugins␊
      Loading plugin "@netlify/plugin-functions-core" from build core␊
      Loading plugin from /file/path␊
    ␊
    ┌─────────────────────────────┐␊
    │     Netlify Build Error     │␊
    └─────────────────────────────┘␊
    ␊
    Error loading "/file/path" plugin:␊
    Error: Plugin 'config' must be an object␊
    `
